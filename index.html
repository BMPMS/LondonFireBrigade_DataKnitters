<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <link rel="stylesheet" href="css/lfb.css"/>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?Merriweather:ital,opsz,wght@0,18..144,300..900;1,18..144,300..900&display=swap">
    <script src="https://d3js.org/d3.v6.min.js" type="text/javascript"></script>
    <script type="text/javascript" src="js/lfbFunctions.js"></script>
    <script type="text/javascript" src="js/lfb.js"></script>

    <title>Data Knitters - London Fire Brigade</title>
</head>
<body>
<div id="container">
    <div id="chartDiv">Hello in Merriweather</div>
</div>
<script>

    // props which you can dynamically change
    const props = {
       colors: {cat:"#8BB88F",bird:"#85ACC1",dog:"#F2B680",fox:"#AF5AFD",other:"#ababab"}
    }

    // build the svg and required groups
    const chartDiv = document.getElementById(divId);
    const width = chartDiv.clientWidth;
    // we can alter this as we go
    const height = width * 0.6;


    let svg = d3.select(`#${divId}`).select("svg");
    if (svg.node() === null) {
        svg = d3.select(`#${divId}`)
            .append("svg")
            .attr("viewBox", [0, 0, width, height])
    }

    const getChartData = async () => {
        const areaData = await d3.csv("data/animalsByYear.csv");
        const voronoiData = await d3.csv("data/animalsTotal.csv")
        return {areaData, voronoiData};
    }

    const loadChart = async () => {
        const {areaData, voronoiData} = await getChartData();
        drawStackedArea(svg,areaData, width/2,height);
        drawVoronoi(svg,areaData,width/2,height);
    };

    loadChart();


</script>
</body>
</html>
